function testWebP(t){var e=new Image;e.onload=e.onerror=function(){t(2==e.height)},e.src="data:image/webp;base64,UklGRjoAAABXRUJQVlA4IC4AAACyAgCdASoCAAIALmk0mk0iIiIiIgBoSygABc6WWgAA/veff/0PP8bA//LwYAAA"}testWebP((function(t){1==t?document.querySelector("body").classList.add("webp"):document.querySelector("body").classList.add("no-webp")}));const modalForm=document.querySelector(".modal__content"),mainForm=document.querySelector(".modal-form"),addForm=document.querySelector(".add-form"),btnSubmit=document.getElementById("btn-submit"),listAddInputList=document.querySelectorAll(".list-add__input"),productList=document.querySelector(".product__list"),modalSuccess=document.querySelector(".modal__success"),modalFailed=document.querySelector(".modal__failed"),btnBack=document.getElementById("btn-back"),btnRepay=document.getElementById("btn-repay"),setProductsList=t=>localStorage.setItem("products",JSON.stringify(t)),getProductsList=()=>JSON.parse(localStorage.getItem("products")),clearProductsList=()=>localStorage.removeItem("products"),createProductsData=t=>{const e=[];for(let o=0;o<t;o++){const t={id:+o+1};e.push(t)}setProductsList(e),renderNewProducts(e)};function renderNewProducts(t){productList.textContent="",t.forEach(t=>{const e=document.createElement("li");e.classList.add("product__item"),e.dataset.productId=t.id,e.innerHTML=`\n      <div class="product__top">\n          <div class="product__title">Product ${t.id}</div>\n          <button class="product__remove" data-removeId="${t.id}"></button>\n      </div>\n      <div class="product__description desc-product">\n          <div class="desc-product__item">\n              <label for="product${t.id}-keyword" class="desc-product__label">\n                  Enter main keyword for the product\n              </label>\n              <input type="text" class="desc-product__input" id="product${t.id}-keyword"\n                  placeholder="for example, sylicon wine cup">\n          </div>\n          <div class="desc-product__item">\n              <label for="product${t.id}-link" class="desc-product__label">\n                  Enter link to the similar product as a reference\n              </label>\n              <input type="text" class="desc-product__input" id="product${t.id}-link"\n                  placeholder="https://...">\n          </div>\n      </div>\n    `,productList.append(e)})}const totalPrice={1:24.99,2:44,3:60,4:72,5:80},toggleProductsRemovable=()=>{const t=getProductsList().length;t>1&&productList.classList.add("removable-products"),t<2&&productList.classList.remove("removable-products")},removeProduct=t=>{const e=getProductsList().filter(e=>e.id!==+t);setProductsList(e),renderNewProducts(e),setNewPrice(),toggleProductsRemovable()},setNewPrice=()=>{const t=getProductsList().length;btnSubmit.textContent=`Submit and Pay ${totalPrice[t]} USD`},checkStatus=()=>{modalSuccess.classList.contains("active")&&(window.location.hash="paymentsuccess"),modalFailed.classList.contains("active")&&(window.location.hash="paymenterror")};modalForm.addEventListener("submit",t=>{t.preventDefault()}),modalForm.addEventListener("click",t=>{const e=t.target;if(e.matches("#show-add-products")&&(localStorage.removeItem("products"),mainForm.classList.add("hidden"),addForm.classList.add("active")),e.matches("#add-products")&&(listAddInputList.forEach(t=>{t.checked&&(createProductsData(t.value),toggleProductsRemovable())}),mainForm.classList.remove("hidden"),addForm.classList.remove("active"),setNewPrice()),e.matches(".product__remove")&&removeProduct(e.dataset.removeid),e.matches("#btn-submit")){const t=btnSubmit.textContent;btnSubmit.innerHTML='<div class="spiner"></div>',setTimeout(()=>{btnSubmit.textContent=t,mainForm.classList.add("hidden"),modalSuccess.classList.add("active"),modalSuccess.classList.contains("active")&&(window.location.hash="paymentsuccess"),modalFailed.classList.contains("active")&&(window.location.hash="paymenterror")},2e3)}});